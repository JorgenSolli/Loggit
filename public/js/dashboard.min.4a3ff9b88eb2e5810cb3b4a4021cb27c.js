var initCharts=function(t,e,a){dataWorkoutActivityChart={labels:t,series:e},optionsWorkoutActivityChart={lineSmooth:Chartist.Interpolation.cardinal({tension:0}),axisY:{showGrid:!0,offset:40},axisX:{showGrid:!1},low:0,high:a,showPoint:!0,height:"200px"};var s=new Chartist.Line("#workoutActivityChart",dataWorkoutActivityChart,optionsWorkoutActivityChart);md.startAnimationForLineChart(s)},musclegroupsPiechart=function(t,e){var a={labels:t,series:e},s={height:"250px",chartPadding:20,labelOffset:40,labelDirection:"explode",donut:!0};Chartist.Pie("#musclegroupsPiechart",a,s)};$(document).ready(function(){for(var t=2016,e=$("#statistics-year"),a=$("#statistics-month"),s=(new Date).getFullYear(),i=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],n=["January","February","March","April","May","June","July","August","September","October","November","December"],r=moment().format("MMM"),o=s;o>=t;o--)o==s?e.append('<option value="'+o+'" selected>'+o+"</option>"):e.append('<option value="'+o+'">'+o+"</option>");for(var o=0;o<i.length;o++)r==i[o]?a.append('<option value="'+i[o]+'" selected>'+n[o]+"</option>"):a.append('<option value="'+i[o]+'">'+n[o]+"</option>");$("#statistics-type").on("change",function(){var t=$(this).val();"months"==t?$("#statistics-month").parent().show():$("#statistics-month").parent().hide()}),$("#statistics-type, statistics-year, #statistics-month").on("change",function(){c()});var c=function(){var t=$("#statistics-type").val(),e=$("#statistics-year").val(),a=$("#statistics-month").val();$.ajax({method:"GET",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},url:"/api/getSessions/"+t+"/"+e+"/"+a,success:function(t){initCharts(t.labels,t.series,t.max)}}),$.ajax({method:"GET",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},url:"/api/getMusclegroups/"+t+"/"+e+"/"+a,success:function(t){for(var e=!1,a=0;a<t.series.length;a++)t.series[a]>0&&(e=!0);e?musclegroupsPiechart(t.labels,t.series):$("#musclegroupsPiechart").html('<div class="m-l-20 m-b-10">You will get access to this chart when you finish at least one routine</div>');for(var a=0;a<t.labels.length;a++){var s=Math.trunc(t.series[a]);$("#"+a+"-percent").text("("+s+"%)")}}}),$.ajax({method:"GET",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},url:"/api/getAvgGymTime/"+t+"/"+e+"/"+a,success:function(t){$("#avg_hr").text(t.avg_hr),$("#avg_min").text(t.avg_min)}}),$.ajax({method:"GET",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},url:"/api/getTopTenExercises/"+t+"/"+e+"/"+a,success:function(t){$("#topTenExercises").empty(),$.each(t,function(e){$("#topTenExercises").append("<tr><td>"+t[e].exercise_name+"</td><td>"+t[e].count+"</td></tr>")})}})};$(".selectpickerAjax").selectpicker({}),c()});