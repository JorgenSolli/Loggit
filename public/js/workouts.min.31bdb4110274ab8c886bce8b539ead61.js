$(document).ready(function(){var t=function(t){$.ajax({url:"/api/delete_workout/"+t,headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},method:"GET",success:function(e){console.log(e),e.success&&($("#workout-"+t).fadeOut(),$("tr.child").fadeOut())}})};$("#exercises a").on("click",function(){var t=$(this),e=t.attr("id"),n=t.html();$(this).addClass("disabled"),$(this).html('<span class="fa fa-spin fa-circle-o-notch"></span> Getting exercise ...'),$.ajax({url:"/api/exercise/"+e,headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},method:"GET",success:function(e){$("#data").html(e.data),$("#exercises").slideUp(),t.html(n).removeClass("disabled")}})}),$(document).on("click","#finishWorkout",function(t){t.preventDefault();var e=!1,n=!1,o=0,a=$(this).attr("href");return $(".list-group-item").each(function(t){"incomplete"==$(this).attr("data-status")?(n=!0,o++):e=!0}),e?(n&&swal({title:"Sure you want to finish?",text:"You haven't completed all exercises!",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, I'm done!",cancelButtonText:"No, I'll finish!",confirmButtonClass:"btn btn-danger",cancelButtonClass:"btn btn-success",buttonsStyling:!1}).then(function(){return window.location.href=a},function(t){if("cancel"===t)return void swal("Awesome!","Let's finish this!","success")}),e&&!n?($(this).addClass("disabled"),$(this).html('<span class="fa fa-spin fa-circle-o-notch"></span> finishing ...'),window.location.href=a):void 0):void swal({title:"Whops!",text:"You need to complete at least ONE exercies before finishing",type:"error",showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"Understood!",confirmButtonClass:"btn btn-primary",buttonsStyling:!1})}),$(document).on("click","#cancelExercise",function(){$("#data").empty(),$(".ps-container").scrollTop(0),$(".ps-container").perfectScrollbar("update"),$("#exercises").slideDown()}),$(document).on("click",".viewWorkout",function(){var t=$(this).children("input").val();$.ajax({url:"/api/get_workout/view/"+t,headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},method:"GET",success:function(t){$("#workouts").hide(),$("#viewWorkout").html(t.data).show()}})}),$(document).on("click",".deleteWorkout",function(){var e=$(this).attr("id"),n=$("#workout-"+e).find(".name").html().trim();swal({title:"Are you sure?",text:n+" will be gone forever!",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(function(){swal("Deleted!","The workout has been deleted.","success"),t(e)})}),$(document).on("click",".updateWorkoutRow",function(){var t=$("#workout_id").val(),e=$(this).parent().parent(),n=e.find(".reps").val(),o=e.find(".weight").val(),a=e.find('input[name="workout_junction_id"]').val();$.ajax({url:"/api/update_workout/"+t,headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},method:"GET",data:{junction_id:a,weight:o,reps:n},success:function(t){t.success?$.notify({icon:"add_alert",message:"The exercise was successfully updated."},{type:"success",timer:2e3,placement:{from:"top",align:"right"}}):$.notify({icon:"add_alert",message:"Something went wrong. Try again or contact support."},{type:"danger",timer:3e3,placement:{from:"top",align:"right"}})}})}),$(document).on("click",".workout-back",function(){$("#viewWorkout").empty().hide(),$("#workouts").show(),$(".ps-container").scrollTop(0),$(".ps-container").perfectScrollbar("update")}),$(document).on("click","#saveWorkout",function(){var t=!0;return $(".required").each(function(e){""==$(this).val()?($(this).closest(".form-group").addClass("has-error").find(".control-label").removeClass("hidden"),t=!1):$(this).closest(".form-group").removeClass("has-error").find(".control-label").addClass("hidden")}),t&&($(this).addClass("disabled"),$(this).html('<span class="fa fa-spin fa-circle-o-notch"></span> saving ...')),t}),$(document).on("click","#clearSession",function(t){t.preventDefault(),swal({title:"Are you sure?",text:"All data connected to this session will be lost.",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, cancel it!",cancelButtonText:"No, cancel!",confirmButtonClass:"btn btn-success",cancelButtonClass:"btn btn-danger",buttonsStyling:!1}).then(function(){window.location.href="/clear"},function(t){if("cancel"===t)return!1})}),$("#datatables").DataTable({pagingType:"full_numbers",lengthMenu:[[10,25,50,-1],[10,25,50,"All"]],responsive:!0,order:[[0,"desc"]],language:{search:"_INPUT_",searchPlaceholder:"Search records"}});$("#datatables").DataTable()});